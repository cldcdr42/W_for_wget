 # После Hello-world

 # Убедитесь в том, что неймспейсы как в файлах, так и при выполнении команд, являются вашими. Читайте инструкции
 # Убедитесь в том, что неймспейсы как в файлах, так и при выполнении команд, являются вашими. Читайте инструкции
 # Убедитесь в том, что неймспейсы как в файлах, так и при выполнении команд, являются вашими. Читайте инструкции
 
 На основе моего хода решения:

 (Не тестировал все шаги с 0, поэтому что-то может в гайде не сработать)

1) Создадим папки, куда будем хранить файлы
 
```
cd ~ && mkdir app && cd app
```

2) Скачать конфигурации базы данных и приложения для запуска в кластере
  
 ```
 wget -O postgres.yml https://shorturl.at/oHfxZ
 wget -O python.yml https://shorturl.at/iqxAS
 ```

3) заменить неймспейсы на свои  
   ==== ОБЯЗАТЕЛЬНО  ====    
   ==== ОБЯЗАТЕЛЬНО  ====  
   ==== ОБЯЗАТЕЛЬНО  ====    
   В двух местах в файле postgres.yml  
   ```
   nano postgres.yml
   ```
   Найти строчки namespace: ns-32  
   Заменить на свои  
   Когда закончили менять, нажмите CTRL+X, затем y (от англиского yes) и Enter    
  
   В двух местах в файле python.yml  
   ```
   nano python.yml
   ```
   Найти строчки namespace: ns-32   
   Заменить на свои  
   Когда закончили менять, нажмите CTRL+X, затем y (от англиского yes) и Enter  

5) Выполнить деплой данных конфигураций. Вместе ns-<xx> указать свой неймспей. Например, ns-57
   ```
   kubectl apply -f postgres.yml -n ns-<xx>
   kubectl apply -f python.yml -n ns-<xx>
   ```
   Рекомендую сначала дождаться запуска (Running) БД, затем - начинать команду запуска приложения

   Если с деплоем что-то не так, отменить его можно (вместо python.yml вставьте название нужного файла)
   ```
   kubectl delete -f python.yml -n ns-<xx>
   ```

7) Дождаться момента, когда все поды получат статус Running (ns-<xx> заменить на свой)
   ```
   kubectl get pods -n ns-<xx>
   ```

8) Когда все готово, можно демонстрировать работу программы. Для этого
   Прокидываем порты с локальной машины (nx-<xx> заменить на свой)
   ```
   kubectl port-forward svc/python-app-svc 5000:5000 -n ns-<xx> &
   ```
   И выполняем запрос. В скобках '{"number": 1}' вместо 1 можно выбрать любое натуральное число от 1 до 100 [1;99]
   ```
   curl -X POST -H "Content-Type: application/json" -d '{"number": 1}' http://localhost:5000/process
   ```
   В случае успехом должно появиться сообщение (Если ввели число X)
   ```
   "Response: {X + 1}. Number {X} has been added to the database."
   ```
   Если до демонстрации уже добавляли числа, возможны два других ответа:
   ```
   Number {X} is already in the database (case 1)
   ```
   ИЛИ
   ```
   Number {num + 1} is already in the database (case 2)
   ```
   Если ответа нет в принципе, то все плохо
   Этого достаточно для получения галочек ENV, Docker, REST, kube, db (5 штук)


# Для галки за ингресы (ING)
1) Узнать ip
```
kubectl het svc -n haproxy-controller
```
Должен быть 10.98.8.45

2) Добавить ip и доменное имя
```
sudo nano /etc/hosts
10.98.8.45 <my_cool_domain.com>
```
Вместо <my_cool_domain.com> можно использовать что угодно, например, test1234.ru; helloworld; hepl111.com

3) Скачать конфигурацию ингресса
```
wget -O ingress.yml https://shorturl.at/zt2mX
```
4)  
